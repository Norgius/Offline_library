# Оффлайн-библиотека
Проект позволяет скачивать книги с сайта [tululu.org](https://tululu.org/). В папке `books/` будут сохраняться книги, а в папке `images/` обложки данных книг. Если книгу не удается скачать, то на экран об этом будет выводиться информация и записываться в `app.log`.

После скачивания книг необходимой командой мы создадим оффлайн-библиотеку.

Вы можете посмотреть на то, каким будет сайт после создания по ссылке:
[Библиотека](https://norgius.github.io/Online_library/pages/index1.html)
## Как установить
Для запуска проекта потребуется `Python3`. Также для его работы необходимы сторонние библиотеки, установим их с файла `requirements.txt`
```
pip install -r requirements.txt 
```
## Что за файлы и папки в проекте
Папки `books/`, `images/` и `pages/` - необходимое media и html-файлы для `github pages`. Данные папки можно удалить, т.к. они нужны исключительно для демонстрации сайта.

Папки `media/` и `static/` - необходимая статика и иконка сайта. Данные папки запрещено удалять.

Файлы `main.py', 'parse_tululu_category.py` - необходимы для загрузки книг.

Файл `render_website.py` - создаёт страницы для оффлайн сайта.

Файл `template.html` - шаблон для html-страниц.
## Аргументы
Для скачивания книг нужно в момент запуска обязательно указать аргументы. В данном проекте агрументы нужны для выбора диапазона, в котором будут скачиваться книги.

Основной код написан в 2-х файлах `main.py` и `parse_tululu_category.py`.

Аргументы файла `main.py`: 
* `start_id`
* `end_id`

Основные аргументы файла `parse_tululu_category.py`:
* `--start_page`
* `--end_page`

Необязательные аргументы файла `parse_tululu_category.py`:
* Аргументы, которые достаточно просто указать, чтобы они сработали
* `--skip_imgs`
* `--skip_txt`
* Аргументы, после указания которых необходимо указать путь
* `--json_path`
* `--dest_folder`

Для более подробной информации об аргументах, запустите нужный вам файл с аргументом `-h`.

## Скачивание книг
Для скачивания книг по их `id` используем файл `main.py`. Во время запуска не забываем про агрументы, например:
```
python main.py 10 20
```
Для скачивания книг жанра `Научная фантастика` используем файл `parse_tululu_category.py`. Именно с помощью этого файла мы получим необходимые данные `books.json` для создания оффлайн-сайта.

Пример запуска `parse_tululu_category.py`:
```
python parse_tululu_category.py --start_page 1 --end_page 3
```
Здесь скрипт будет скачивать книги с 1-ой и 2-ой страниц, что позволит ему загрузить около 50 книг.

Если перед запуском `parse_tululu_category.py` не указать аргументы, то он загрузит книги с последних 2-х страниц (700 и 701).

Во время скачивания книг будут отображаться названия и авторы книг, а также индикатор загрузки. 

Не все книги можно загрузить с данного сайта, о невозможности загрузки вам сообщит вывод в консоль, например:
```
Cо страницы - https://tululu.org/txt.php?id=27
произошёл редирект на страницу - https://tululu.org/
```
## Создаём и запускаем сайт
Предварительно скачав определенное количество книг с помощью файла `parse_tululu_category.py` теперь можем создать оффлайн-библиотеку.

Для корректного создания сайта, необходимо, чтобы созданный файл `books.json` и папки (`books` и `images`) с данными находились в корневой директории проекта. Если вы не пользовались во время загрузки книг необязательными аргументами, то беспокоится не о чем.

Запустим скрипт:
```
python render_website.py
```
Сайт библиотеки создан, перейдите в папку `pages` и откройте с помощью браузера файл `index1.html`.

Кликая по ссылке `Читать` на любой понравившейся книге, в новой вкладке откроется текст книги.
## Для разработчиков
Если вы захотите немного изменить внешний вид сайта, после запуска `render_website.py` будет создан сервер по адресу [Для отладки](http://127.0.0.1:5500/pages/index1.html).

И пока сервер работает, внося любые изменения в шаблон `template.html` вы сразу заметите изменения на сайте, а сервер сообщит вам: `Site rebuilt`